# 1.  描述下项目架构的演变过程？
> 1. 单体式应用架构(*All-In-One*),将所有功能集中在一个项目工程中
> 2. 垂直应用架构,根据业务把一个项目垂直切割成多个项目
> 3. 分布式应用架构,将核心的业务抽取出来,作为独立的服务单独部署
> 4. 微服务架构,将一个大的项目彻底拆分为一个个的小服务,各个服务独立打包/部署和升级
> 5. [参阅](https://www.51cto.com/article/686587.html)

# 2.SpringBoot 中有一个类标记了@Controller 注解，现在想要通过自动扫描包机制把这个类的对象加入 IOC 容器，那么这个类应该放在哪？
> 1. 放在主启动类包的子包下
> 2. 在主启动类上方使用@ComponentScan 注解指定这个类的所在包

# 3.  Git 在向远程 origin 推送 dev 分支的代码时失败，需要解决冲突，如何操作
> 1. 先使用 git pull origin dev 命令将远程库上最新的代码拉取到本地
> 2. 检查代码的冲突,修改冲突文件
> 3. 执行 git add 和 git commit 命令将工作区内容存入本地库
> 4. git push origin dev 推送本地库到远程库

# 4.介绍下项目开发时 git 各种分支使用情况
> - master:主干分支(生产环境代码)
> - develop:开发分支,正在开发过程中的代码,最新的代码
> - feature:功能分支,中长期开发功能的代码
> - release:发布版本分支,在大更新的版本上线前会从开发分支中分出发布版本分支,进行最后的集成测试
> - hotfix:热修复分支,负责管理生产环境中紧急修复的代码

# 5. 简单介绍一下 Nginx
> Nginx 是一个高性能的反向代理服务器,他的主要作用有三点
> - 反向代理,客户端的请求发送到 Nginx,由 Nginx 选择目标服务器获取数据后返回给客户端
> - 负载均衡,将请求按照配置的规则动态的分发到多个服务器上
> - 动静分离,加快网站的解析速度,将静态页面和动态页面交由不同的服务器解析,降低单个服务器的压力

# 6.  Nginx 原理
[[Nginx#Nginx 原理]]
> 1.  Nginx 中有两种进程,master 和 worker。当有请求访问时,master 进行就会通知 worker 进程来处理这个请求。当有多个 worker 进程时,就会来争抢这个请求,一个请求只会被一个 worker 处理
2. worker 通过异步非阻塞的方式来处理拿到的请求,通过这种处理方式,每个 worker 都可以将一个 CPU 的性能发挥到极致
3. 当 master 收到重新加载配置文件的指令后，会重新载入文件并根据文件开启新的进程，启用新的 worker 进程来接收请求，旧的 worker 在处理完手中的请求后便推出不再接收请求

# 7.  Nginx 作用以及常见配置
主要作用：
> - 反向代理
> - 负载均衡
> - 动静分离

# 8.  负载均衡算法/策略
> - 轮询:将每一次的请求轮流分配给内部配置的服务器
> - 权重:根据服务器不同的处理能力,为不同服务器设置不同的权值,分配权重对应的服务请求
> - 随机:将请求随机分配给多个服务器
> - 最短响应时间:响应时间最短的服务器优先分配
> - IP-hash:按照请求 IP 的 hash 结果分配不同的服务器

# 9.  Session 一致性的几种解决方案？
> - session 同步:将 session 数据每台服务器复制一份
> - IP-hash:为不同的 hash 结果配置不同的服务器
> - 统一存储在 redis 中,由服务器总 redis 中获取

# 10.  为什么要用消息队列
> 1. 提升后台响应速度,将不需要即使反馈的业务存入消息队列进行异步处理,优先返回即时信息,提升用户体验
> 2. 抵御流量激增对系统的冲击,将一瞬间产生的大量请求存入消息队列,由后台服务从中每次取出一定数量的请求进行处理,消除并发访问的高峰
> 3. 降低系统的耦合度,不同模块间通过消息队列进行数据的传递,避免了不同模块间的相互调用,提升应用的可扩展性

# 11. Exchange 类型有几种？作用如何？
> 1. Fanout:广播,将信息发布给所有绑定此路由的消息队列
> 2. Direct:定向,将信息发送给匹配指定路由 key 的队列
> 3. Topic:通配符,交换机通过通配符匹配将信息发送到指定的队列

# 12. 使用消息队列带来的一些问题
> 1. 应用复杂度提升,应用内增加了一个不稳定因素,我们需要考虑信息的重复消费等问题
> 2. 使用消息队列还需要考虑它的可用性问题,如果不为他搭建集群,万一这台机器挂掉会导致整个系统几乎不可用
> 3. 数据丢失问题,将信息存入消息队列中,如果不做任何的保护措施,一旦 MQ 挂掉我们的数据也会一同丢失

# 13. 如何解决消息队列的延时以及过期失效问题?消息队列满了之后该如何处理?有几百万的消息持续积压几小时,说说如何解决?
> 1. 先修复 consumer 的问题,确保他的正常消费速度,然后将现有的 consumer 都停掉
> 2. 临时建立原先 10~20 倍的 queue(新建一个 topic，partition 是原来的 10 倍)
> 3. 写一个临时分发消息的 consumer,替代掉先前直故障的 consumer,用这个 consumer 来将队列中的消息分发到临时新建的 queue 中(*由之前的直接操作数据库变为转发信息至临时的 queue 中*)
> 4. 扩充 10 倍的机器来部署 consumer,让 consumer 来处理临时 queue 的信息
> 5. 快速将积压的信息恢复完毕后,恢复到原来的部署架构

# 14. 为什么要使用 Elasticsearch?
> - 系统中的数据会随着业务的发展不断壮大,而在数据库中往往是使用模糊查询的方式来查询数据
> - 这样的查询方式在海量的数据中想要查询到目标数据效率是十分低下的,所以我们使用 es 做一个全文的索引
> - 将经常查询的字段存放到 es 索引库中,可以大大的提高查询的效率

# 15. Elasticsearch 中的倒排索引是什么？
> - 倒排索引的目的是根据条件更快速的查找到文档
> - 倒排索引会在存储数据时将关键词和数据进行关联,保存到倒排表中,直接从倒排表索引查询数据

# 16. Elasticsearch 集群脑裂问题？
> 集群的脑裂问题就是同一个集群中同时出现了两个 master 节点
> 他可能的成因有:
> 1. 网络问题,集群间的延迟导致副节点无法联系到主节点,认为主节点已经挂掉从而选举出新的主节点
> 2. 节点负载,主节点即为 master 又为 dataNode,当主节点在处理大量的访问量时可能响应时间过长,副节点无法得到即时响应便认为主节点挂掉重新选举
> 3. 内存回收,es 进程占用的内存过大,从而引起 JVM 大规模的回收内存,造成 es 进程失去响应

# 17. Elasticsearch 索引文档（写）的流程？
> 1. 客户端发送请求,这个请求随机分配给一个节点,这个节点就称为协调节点
> 2. 协调节点进行路由计算,计算出这个数据所在的分片位置并将请求转发给对应的主分片集群
> 3. 主分片的数据修改后,将数据同步到副分片中
> 4. 所有分片处理完毕后,协调节点将结果返回给客户端

# 18. RPC 原理是什么？

# 19. Springboot 和 springCloud 开发中常用注解
> - @SpringBootApplication 标注这个类为主启动类
> - @EnableFeignClient 启用 OpenFeign 远程调用
> - @EnableDiscoveryClient 在 Nacos 中注册服务
> - @SentinelResource 为被标记的方法指定一个服务降级兜底的方法

# 20. SpringBoot 和 SpringCloud 的区别？
> 1. SpringBoot 是快速构建 Spring 项目的脚手架
> 2. SpringCloud 提供了一系列的组件以便我们实现微服务架构的思想
> 3. SpringCloud 必须依赖 SpringBoot,而 SpringBoot 则可以独立运行

# 21. Spring Cloud 的核心组件有哪些？
> - Nacos 注册&配置中心
> - OpenFeign 远程调用
> - Gateway 网关
> - Sentinel 服务降级
> - Slueth 分布式调用链路追踪器

# 22. 什么是服务熔断？什么是服务降级？
> - 服务熔断:约定规则,若某个服务的响应超过这个约定的规则,便**不再调用**这个服务,而返回约定的服务降级后的信息(假如 a 服务要去调用 b 服务,但此刻 b 服务已经无法处理更多的请求,则进行服务熔断,a 服务不再调用 b 服务)
> - 服务降级:在某个服务调用失败时,返回一个兜底的数据

# 23. Dubbo 执行流程是什么样的？各个组件作用

# 24. Nacos 作用以及注册中心的原理
> Nacos 的作用
> - 服务中心:管理注册服务,向 Client 提供服务信息
> - 配置中心:可以直接在配置中心添加和管理配置
> 
> 注册中心原理
> - Client 每五秒向 Server 发送一次心跳,同时 Server 也会对 Client 发起健康检查,如果在 15 秒内五心跳且健康检测不通过则从服务中心剔除这个服务

# 25. 网关三大核心概念
> - 路由(*Route*) :用于判断当前的请求是否匹配路由
> - 断言(*Predicate*):表示该请求是否符合要求
> - 过滤(*Filter*)

# 26. Spring Cloud Alibaba 能干嘛
> - 使用 Sentinel 实现服务降级/熔断
> - 使用 Nacos 注册/配置服务
> - 阿里云短信服务
> - 分布式事务

# 27. 什么是分布式事务
> - 分布式事务是指事务的参与者,支持事务的服务器,事务管理器与资源服务器都分别部署在不同的服务器上
> - 每一次大的操作都由数个小的服务分别完成,分布式事务要保证事务的一致性,要么全部成功,要么全部失败
> - 分布式事务就是为了保证不同数据库的数据一致

# 28. 分布式事务解决方案
> 1. XA协议下的两阶段提交
> 2. TCC三段提交
> 3. 本地消息表(MQ+DB Table)
> 4. 事务消息(RocketMQ)
> 5. Seata

# 29. 分布式事务的执行流程
> 1. TM(Transaction Manager)向TC(Transaction Corrdinator)注册全局事务记录
> 2. RM(Resource Manager)开启本地事务并执行,将处理的结果返回给TM
> 3. 由TM发起提交事务或回滚

# 30. Docker 组成部分
> - Docker Client(*客户端*)
> - Docker Image(*镜像*)
> - Docker Containers(*容器*)
> - Docker Daemon (*守护进程*)
> - Docker Repository(*仓库*)
